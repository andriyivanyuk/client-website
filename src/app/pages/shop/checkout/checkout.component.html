<div>
  <div>Checkout</div>
  <form [formGroup]="form" class="order-form">
    <mat-card>
      <mat-form-field appearance="fill">
        <mat-label>Назва</mat-label>
        <input matInput formControlName="title" />
        @if(form.get('title')?.errors?.['required']) {
        <mat-error> Email is required </mat-error>
        }
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>Email</mat-label>
        <input matInput formControlName="email" />
        @if(form.get('email')?.errors?.['required']) {
        <mat-error> Email is required </mat-error>
        } @if(form.get('email')?.errors?.['email']) {
        <mat-error> Please enter a valid email </mat-error>
        }
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>Мобільниий телефон</mat-label>
        <input matInput formControlName="phone" />

        @if(form.get('phone')?.errors?.['required']) {
        <mat-error> Phone is required </mat-error>
        } @if(form.get('phone')?.errors?.['pattern']) {
        <mat-error> Please enter a valid phone number </mat-error>
        }
      </mat-form-field>

      <div formArrayName="items">
        @for(item of items.controls; track item; let index = $index) {
        <div [formGroupName]="index">
          <mat-form-field appearance="fill">
            <mat-label>Product ID</mat-label>
            <input matInput formControlName="product_id" />
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>Quantity</mat-label>
            <input matInput type="number" formControlName="quantity" />
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>Price</mat-label>
            <input matInput type="text" formControlName="price" />
          </mat-form-field>
        </div>
        }
      </div>

      <button mat-raised-button color="primary" (click)="createOrder()">
        Створити замовлення
      </button>
    </mat-card>
  </form>

  <div class="btn-group">
    <button mat-button routerLink="/client/shop-list">Магазин</button>
  </div>
</div>
